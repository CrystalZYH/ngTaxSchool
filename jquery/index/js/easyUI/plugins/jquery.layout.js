(function(G){var I=false;function A(L){var S=G.data(L,"layout");var P=S.options;var N=S.panels;var K=G(L);if(L.tagName=="BODY"){K._fit()}else{P.fit?K.css(K._fit()):K._fit(false)}var Q={top:0,left:0,width:K.width(),height:K.height()};R(E(N.expandNorth)?N.expandNorth:N.north,"n");R(E(N.expandSouth)?N.expandSouth:N.south,"s");O(E(N.expandEast)?N.expandEast:N.east,"e");O(E(N.expandWest)?N.expandWest:N.west,"w");N.center.panel("resize",Q);function T(U){var V=U.panel("options");return Math.min(Math.max(V.height,V.minHeight),V.maxHeight)}function M(U){var V=U.panel("options");return Math.min(Math.max(V.width,V.minWidth),V.maxWidth)}function R(X,W){if(!X.length){return}var V=X.panel("options");var U=T(X);X.panel("resize",{width:K.width(),height:U,left:0,top:(W=="n"?0:K.height()-U)});Q.height-=U;if(W=="n"){Q.top+=U;if(!V.split&&V.border){Q.top--}}if(!V.split&&V.border){Q.height++}}function O(W,V){if(!W.length){return}var U=W.panel("options");var X=M(W);W.panel("resize",{width:X,height:Q.height,left:(V=="e"?K.width()-X:0),top:Q.top});Q.width-=X;if(V=="w"){Q.left+=X;if(!U.split&&U.border){Q.left--}}if(!U.split&&U.border){Q.width++}}}function F(K){var L=G(K);L.addClass("layout");function M(N){N.children("div").each(function(){var O=G.fn.layout.parsePanelOptions(this);if("north,south,east,west,center".indexOf(O.region)>=0){C(K,O,this)}})}L.children("form").length?M(L.children("form")):M(L);L.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>');L.bind("_resize",function(N,P){var O=G.data(K,"layout").options;if(O.fit==true||P){A(K)}return false})}function C(O,K,Q){K.region=K.region||"center";var T=G.data(O,"layout").panels;var L=G(O);var N=K.region;if(T[N].length){return}var P=G(Q);if(!P.length){P=G("<div></div>").appendTo(L)}var M=G.extend({},G.fn.layout.paneldefaults,{width:(P.length?parseInt(P[0].style.width)||P.outerWidth():"auto"),height:(P.length?parseInt(P[0].style.height)||P.outerHeight():"auto"),doSize:false,collapsible:true,cls:("layout-panel layout-panel-"+N),bodyCls:"layout-body",onOpen:function(){var V=G(this).panel("header").children("div.panel-tool");V.children("a.panel-tool-collapse").hide();var U={north:"up",south:"down",east:"right",west:"left"};if(!U[N]){return}var W="layout-button-"+U[N];var X=V.children("a."+W);if(!X.length){X=G('<a href="javascript:void(0)"></a>').addClass(W).appendTo(V);X.bind("click",{dir:N},function(Y){B(O,Y.data.dir);return false})}G(this).panel("options").collapsible?X.show():X.hide()}},K);P.panel(M);T[N]=P;if(P.panel("options").split){var S=P.panel("panel");S.addClass("layout-split-"+N);var R="";if(N=="north"){R="s"}if(N=="south"){R="n"}if(N=="east"){R="w"}if(N=="west"){R="e"}S.resizable(G.extend({},{handles:R,onStartResize:function(V){I=true;if(N=="north"||N=="south"){var U=G(">div.layout-split-proxy-v",O)}else{var U=G(">div.layout-split-proxy-h",O)}var Y=0,W=0,a=0,Z=0;var X={display:"block"};if(N=="north"){X.top=parseInt(S.css("top"))+S.outerHeight()-U.height();X.left=parseInt(S.css("left"));X.width=S.outerWidth();X.height=U.height()}else{if(N=="south"){X.top=parseInt(S.css("top"));X.left=parseInt(S.css("left"));X.width=S.outerWidth();X.height=U.height()}else{if(N=="east"){X.top=parseInt(S.css("top"))||0;X.left=parseInt(S.css("left"))||0;X.width=U.width();X.height=S.outerHeight()}else{if(N=="west"){X.top=parseInt(S.css("top"))||0;X.left=S.outerWidth()-U.width();X.width=U.width();X.height=S.outerHeight()}}}}U.css(X);G('<div class="layout-mask"></div>').css({left:0,top:0,width:L.width(),height:L.height()}).appendTo(L)},onResize:function(V){if(N=="north"||N=="south"){var U=G(">div.layout-split-proxy-v",O);U.css("top",V.pageY-G(O).offset().top-U.height()/2)}else{var U=G(">div.layout-split-proxy-h",O);U.css("left",V.pageX-G(O).offset().left-U.width()/2)}return false},onStopResize:function(U){L.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide();P.panel("resize",U.data);A(O);I=false;L.find(">div.layout-mask").remove()}},K))}}function J(L,K){var N=G.data(L,"layout").panels;if(N[K].length){N[K].panel("destroy");N[K]=G();var M="expand"+K.substring(0,1).toUpperCase()+K.substring(1);if(N[M]){N[M].panel("destroy");N[M]=undefined}}}function B(Q,P,S){if(S==undefined){S="normal"}var R=G.data(Q,"layout").panels;var L=R[P];var N=L.panel("options");if(N.onBeforeCollapse.call(L)==false){return}var M="expand"+P.substring(0,1).toUpperCase()+P.substring(1);if(!R[M]){R[M]=O(P);R[M].panel("panel").bind("click",function(){var U=K();L.panel("expand",false).panel("open").panel("resize",U.collapse);L.panel("panel").animate(U.expand,function(){G(this).unbind(".layout").bind("mouseleave.layout",{region:P},function(V){if(I==true){return}B(Q,V.data.region)})});return false})}var T=K();if(!E(R[M])){R.center.panel("resize",T.resizeC)}L.panel("panel").animate(T.collapse,S,function(){L.panel("collapse",false).panel("close");R[M].panel("open").panel("resize",T.expandP);G(this).unbind(".layout")});function O(U){var V;if(U=="east"){V="layout-button-left"}else{if(U=="west"){V="layout-button-right"}else{if(U=="north"){V="layout-button-down"}else{if(U=="south"){V="layout-button-up"}}}}var W=G("<div></div>").appendTo(Q);W.panel(G.extend({},G.fn.layout.paneldefaults,{cls:("layout-expand layout-expand-"+U),title:"&nbsp;",closed:true,doSize:false,tools:[{iconCls:V,handler:function(){H(Q,P);return false}}]}));W.panel("panel").hover(function(){G(this).addClass("layout-expand-over")},function(){G(this).removeClass("layout-expand-over")});return W}function K(){var U=G(Q);var W=R.center.panel("options");if(P=="east"){var V=W.width+N.width-28;if(N.split||!N.border){V++}return{resizeC:{width:V},expand:{left:U.width()-N.width},expandP:{top:W.top,left:U.width()-28,width:28,height:W.height},collapse:{left:U.width(),top:W.top,height:W.height}}}else{if(P=="west"){var V=W.width+N.width-28;if(N.split||!N.border){V++}return{resizeC:{width:V,left:28-1},expand:{left:0},expandP:{left:0,top:W.top,width:28,height:W.height},collapse:{left:-N.width,top:W.top,height:W.height}}}else{if(P=="north"){var X=W.height;if(!E(R.expandNorth)){X+=N.height-28+((N.split||!N.border)?1:0)}R.east.add(R.west).add(R.expandEast).add(R.expandWest).panel("resize",{top:28-1,height:X});return{resizeC:{top:28-1,height:X},expand:{top:0},expandP:{top:0,left:0,width:U.width(),height:28},collapse:{top:-N.height,width:U.width()}}}else{if(P=="south"){var X=W.height;if(!E(R.expandSouth)){X+=N.height-28+((N.split||!N.border)?1:0)}R.east.add(R.west).add(R.expandEast).add(R.expandWest).panel("resize",{height:X});return{resizeC:{height:X},expand:{top:U.height()-N.height},expandP:{top:U.height()-28,left:0,width:U.width(),height:28},collapse:{top:U.height(),width:U.width()}}}}}}}}function H(K,R){var Q=G.data(K,"layout").panels;var L=Q[R];var N=L.panel("options");if(N.onBeforeExpand.call(L)==false){return}var M=P();var O="expand"+R.substring(0,1).toUpperCase()+R.substring(1);if(Q[O]){Q[O].panel("close");L.panel("panel").stop(true,true);L.panel("expand",false).panel("open").panel("resize",M.collapse);L.panel("panel").animate(M.expand,function(){A(K)})}function P(){var S=G(K);var T=Q.center.panel("options");if(R=="east"&&Q.expandEast){return{collapse:{left:S.width(),top:T.top,height:T.height},expand:{left:S.width()-Q["east"].panel("options").width}}}else{if(R=="west"&&Q.expandWest){return{collapse:{left:-Q["west"].panel("options").width,top:T.top,height:T.height},expand:{left:0}}}else{if(R=="north"&&Q.expandNorth){return{collapse:{top:-Q["north"].panel("options").height,width:S.width()},expand:{top:0}}}else{if(R=="south"&&Q.expandSouth){return{collapse:{top:S.height(),width:S.width()},expand:{top:S.height()-Q["south"].panel("options").height}}}}}}}}function E(K){if(!K){return false}if(K.length){return K.panel("panel").is(":visible")}else{return false}}function D(L){var K=G.data(L,"layout").panels;if(K.east.length&&K.east.panel("options").collapsed){B(L,"east",0)}if(K.west.length&&K.west.panel("options").collapsed){B(L,"west",0)}if(K.north.length&&K.north.panel("options").collapsed){B(L,"north",0)}if(K.south.length&&K.south.panel("options").collapsed){B(L,"south",0)}}G.fn.layout=function(L,K){if(typeof L=="string"){return G.fn.layout.methods[L](this,K)}L=L||{};return this.each(function(){var M=G.data(this,"layout");if(M){G.extend(M.options,L)}else{var N=G.extend({},G.fn.layout.defaults,G.fn.layout.parseOptions(this),L);G.data(this,"layout",{options:N,panels:{center:G(),north:G(),south:G(),east:G(),west:G()}});F(this)}A(this);D(this)})};G.fn.layout.methods={resize:function(K){return K.each(function(){A(this)})},panel:function(K,L){return G.data(K[0],"layout").panels[L]},collapse:function(K,L){return K.each(function(){B(this,L)})},expand:function(K,L){return K.each(function(){H(this,L)})},add:function(K,L){return K.each(function(){C(this,L);A(this);if(G(this).layout("panel",L.region).panel("options").collapsed){B(this,L.region,0)}})},remove:function(K,L){return K.each(function(){J(this,L);A(this)})}};G.fn.layout.parseOptions=function(K){return G.extend({},G.parser.parseOptions(K,[{fit:"boolean"}]))};G.fn.layout.defaults={fit:false};G.fn.layout.parsePanelOptions=function(K){var L=G(K);return G.extend({},G.fn.panel.parseOptions(K),G.parser.parseOptions(K,["region",{split:"boolean",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))};G.fn.layout.paneldefaults=G.extend({},G.fn.panel.defaults,{region:null,split:false,minWidth:10,minHeight:10,maxWidth:10000,maxHeight:10000})})(jQuery);